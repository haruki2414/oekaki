<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãŠçµµæãã‚¢ãƒ—ãƒª</title>
<style>
  body {
    font-family: sans-serif;
    background: #f5f5f5;
    margin: 0;
    padding: 20px;
  }

  /* å…¨ä½“ã‚’æ¨ªä¸¦ã³ã«ã™ã‚‹ */
  .container {
    display: flex;
    align-items: flex-start;
    gap: 20px;
  }

  /* å·¦å´ã®ç”»åƒ */
  .side-image img {
    width: 300px;  /* å¿…è¦ã«å¿œã˜ã¦å¤‰æ›´ */
    border: 2px solid #333;
    background: #fff;
  }

  /* å³å´ã®æç”»ã‚¨ãƒªã‚¢ */
  .drawing-area {
    text-align: center;
  }

  #canvas {
    background: #fff;
    border: 2px solid #333;
    cursor: crosshair;
    touch-action: none; /* ã‚¿ãƒƒãƒæ™‚ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é˜²æ­¢ */
  }

  .toolbar {
    margin-bottom: 10px;
  }
</style>
</head>
<body>

<h2>ğŸ¨ ãŠçµµæãã‚¢ãƒ—ãƒªï¼ˆå·¦å´ã«ç”»åƒä»˜ãï¼‰</h2>

<div class="container">

  <!-- å·¦å´ã®ç”»åƒ -->
  <div class="side-image">
    <img src="image1.jpg" alt="ã‚µã‚¤ãƒ‰ç”»åƒ">
  </div>

  <!-- å³å´ã®ãƒ„ãƒ¼ãƒ« + ã‚­ãƒ£ãƒ³ãƒã‚¹ -->
  <div class="drawing-area">

    <div class="toolbar">
      ç·šã®è‰²ï¼š<input type="color" id="color" value="#000000">
      å¤ªã•ï¼š<input type="range" id="size" min="1" max="30" value="5">
      <button onclick="clearCanvas()">ã‚¯ãƒªã‚¢</button>
    </div>

    <canvas id="canvas" width="800" height="500"></canvas>

  </div>

</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
let drawing = false;
let color = document.getElementById("color").value;
let size = document.getElementById("size").value;

// -------------------------
// PCï¼ˆãƒã‚¦ã‚¹ï¼‰ã‚¤ãƒ™ãƒ³ãƒˆ
// -------------------------
canvas.addEventListener("mousedown", startDraw);
canvas.addEventListener("mouseup", endDraw);
canvas.addEventListener("mouseout", endDraw);
canvas.addEventListener("mousemove", draw);

// -------------------------
// ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆ
// -------------------------
canvas.addEventListener("touchstart", startDrawTouch);
canvas.addEventListener("touchend", endDraw);
canvas.addEventListener("touchcancel", endDraw);
canvas.addEventListener("touchmove", drawTouch);

document.getElementById("color").addEventListener("change", function() {
  color = this.value;
});
document.getElementById("size").addEventListener("change", function() {
  size = this.value;
});

// --- PCç”¨ ---
function startDraw(e) {
  drawing = true;
  ctx.beginPath();
  ctx.moveTo(e.offsetX, e.offsetY);
}

function draw(e) {
  if (!drawing) return;
  ctx.lineWidth = size;
  ctx.lineCap = "round";
  ctx.strokeStyle = color;
  ctx.lineTo(e.offsetX, e.offsetY);
  ctx.stroke();
}

function endDraw() {
  drawing = false;
  ctx.beginPath();
}

// --- ã‚¿ãƒƒãƒç”¨ ---
function getTouchPos(event) {
  const rect = canvas.getBoundingClientRect();
  const touch = event.touches[0];
  return {
    x: touch.clientX - rect.left,
    y: touch.clientY - rect.top
  };
}

function startDrawTouch(e) {
  e.preventDefault();
  const pos = getTouchPos(e);
  drawing = true;
  ctx.beginPath();
  ctx.moveTo(pos.x, pos.y);
}

function drawTouch(e) {
  if (!drawing) return;
  e.preventDefault();
  const pos = getTouchPos(e);
  ctx.lineWidth = size;
  ctx.lineCap = "round";
  ctx.strokeStyle = color;
  ctx.lineTo(pos.x, pos.y);
  ctx.stroke();
}

// --- ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚¯ãƒªã‚¢ ---
function clearCanvas() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.beginPath();
}
</script>

</body>
</html>
